<div dir="rtl">

<h1>Smart-SSL</h1>

<p><em>همراه هوشمند Let's Encrypt و Cloudflare برای مدیریت یکپارچه گواهینامه‌های SSL.</em></p>

<table border="0" width="100%" cellspacing="0" cellpadding="15" bgcolor="#f6f8fa" align="right">
  <tr>
    <td>
      <p> <strong> اسکریپت Smart-SSL</strong> یک اسکریپت قدرتمند Bash است که با ادغام <code>certbot</code> با DNS API کلودفلر، قابلیت‌های آن را به سطح بالاتری می‌برد. این ابزار به شما امکان می‌دهد گواهینامه‌های SSL از Let's Encrypt—شامل گواهینامه‌های <strong>Wildcard</strong>—را بدون نیاز به باز بودن پورت‌های (80/443) روی سرور خود صادر و مدیریت کنید. این یک راه‌حل کامل و منو-محور برای مدیریت بی‌دردسر، امن و انعطاف‌پذیر گواهینامه‌ها است.</p>
    </td>
  </tr>
</table>

<hr>

<h2>✨ ویژگی‌های کلیدی</h2>

<ul>
    <li>✅ <strong>چالش DNS-01 کلودفلر:</strong> گواهینامه‌های SSL را بدون نیاز به باز گذاشتن پورت 80 سرور به اینترنت دریافت کنید. ایده‌آل برای سرویس‌های داخلی، سرورهای پشت فایروال یا تنظیمات غیر استاندارد.</li>
    <li>✅ <strong>پشتیبانی از گواهینامه Wildcard:</strong> به راحتی تمام زیردامنه‌های خود (<code>*.example.com</code>) را با یک گواهینامه امن کنید.</li>
    <li>✅ <strong>متدهای استاندارد Certbot:</strong> پشتیبانی کامل از چالش‌های سنتی <code>standalone</code> و <code>webroot</code> در صورت تمایل.</li>
    <li>✅ <strong>انتشار خودکار:</strong> گواهینامه‌های تمدید شده را به صورت خودکار در مسیر دلخواه شما کپی می‌کند تا برنامه‌های شما همیشه از آخرین نسخه گواهینامه استفاده کنند.</li>
    <li>✅ <strong>مدیریت کامل چرخه عمر:</strong> یک منوی کاربرپسند برای افزودن، لیست کردن، حذف و مدیریت دامنه‌های شما.</li>
    <li>✅ <strong>مهاجرت آسان:</strong> گواهینامه‌های موجود <code>certbot</code> را به مدیریت Smart-SSL وارد کنید یا آن‌ها را از متدهای استاندارد به متد قدرتمندتر DNS کلودفلر تبدیل کنید.</li>
    <li>✅ <strong>مستقل و هوشمند:</strong> شامل نصب وابستگی‌ها، به‌روزرسانی خودکار و یک حذف‌کننده تمیز.</li>
    <li>✅ <strong>امنیت در طراحی:</strong> توکن API کلودفلر شما را با مجوزهای دسترسی مناسب به صورت امن مدیریت می‌کند.</li>
</ul>

<hr>

<h2>🚀 چرا Smart-SSL؟</h2>

<p>درحالی‌که <code>certbot</code> ابزاری فوق‌العاده است، مدیریت گواهینامه‌ها می‌تواند پیچیده شود، به خصوص در سناریوهایی که وب سرور استاندارد وجود ندارد یا نیاز به پشتیبانی از Wildcard است. Smart-SSL این شکاف را پر می‌کند.</p>

<table border="0" width="100%" cellspacing="0" cellpadding="15" bgcolor="#f6f8fa" align="right">
  <tr>
    <td>
      <p>✅ <strong>بزرگترین مزیت:</strong> متد DNS کلودفلر. Smart-SSL فرآیند افزودن یک رکورد موقت DNS TXT برای اثبات مالکیت دامنه را خودکار می‌کند. این به معنای:</p>
      <ul dir="rtl">
          <li><strong>بدون قطعی (Downtime):</strong> نیازی به متوقف کردن وب سرور برای صدور گواهینامه نیست.</li>
          <li><strong>بدون نیاز به پورت باز:</strong> سرور شما می‌تواند روی پورت 80 به طور کامل از ترافیک عمومی وب فایروال شده باقی بماند.</li>
          <li><strong>انعطاف‌پذیری نهایی:</strong> برای هر دستگاهی گواهینامه دریافت کنید، نه فقط برای وب سرورهای عمومی.</li>
      </ul>
    </td>
  </tr>
</table>

<hr>

<h2>🛠️ نصب و راه‌اندازی</h2>

<h3>۱. دانلود اسکریپت</h3>
<pre><code>curl -sSL https://raw.githubusercontent.com/Nima786/Smart-SSL/main/smart-ssl -o /usr/local/bin/smart-ssl
chmod +x /usr/local/bin/smart-ssl</code></pre>

<h3>۲. اجرای منوی تعاملی</h3>
<p>کافیست اسکریپت را به عنوان کاربر root اجرا کنید تا منوی اصلی باز شود:</p>
<pre><code>sudo smart-ssl</code></pre>

<h3>۳. راه‌اندازی اولیه</h3>
<p>از منوی اصلی، این دو مرحله یک‌باره را انجام دهید:</p>
<ol>
    <li><strong>گزینه ۱) نصب وابستگی‌ها</strong> را انتخاب کنید تا از نصب <code>certbot</code> و پلاگین کلودفلر اطمینان حاصل شود.</li>
    <li><strong>گزینه ۲) راه‌اندازی</strong> را انتخاب کنید تا ایمیل Let's Encrypt و توکن API کلودفلر خود را پیکربندی کنید.</li>
</ol>

<table border="0" width="100%" cellspacing="0" cellpadding="15" bgcolor="#f6f8fa" align="right">
  <tr>
    <td>
      <p>⚠️ <strong>توکن API کلودفلر:</strong> شما می‌توانید یک توکن از داشبورد کلودفلر خود ایجاد کنید. به <strong>My Profile → API Tokens → Create Token</strong> بروید. از قالب "Edit zone DNS" برای مجوزهای مورد نیاز استفاده کنید.</p>
    </td>
  </tr>
</table>

<hr>

<h2>📖 گردش‌کارهای رایج</h2>

<h3>صدور گواهینامه (متد کلودفلر)</h3>
<p>این متد برای اکثر موارد استفاده توصیه می‌شود.</p>
<ol>
    <li><strong>گزینه ۳) افزودن گواهینامه (Cloudflare DNS)</strong> را انتخاب کنید.</li>
    <li>دامنه خود را وارد کنید (مثلاً <code>example.com</code>).</li>
    <li>حالت را انتخاب کنید: <code>simple</code> برای دامنه اصلی یا <code>wildcard</code> برای امن کردن تمام زیردامنه‌ها.</li>
    <li>(اختیاری) یک <strong>مسیر انتشار (Publish Path)</strong> مشخص کنید. این مسیری است که Smart-SSL فایل‌های گواهینامه (<code>privkey.pem</code> و <code>fullchain.pem</code>) را برای استفاده برنامه‌های شما در آنجا کپی می‌کند.</li>
</ol>

<h3>مدیریت گواهینامه‌ها</h3>
<ul>
    <li><strong>لیست دامنه‌ها (گزینه ۵):</strong> مشاهده تمام دامنه‌های مدیریت شده، حالت آن‌ها، مسیر انتشار و تاریخ انقضا.</li>
    <li><strong>تغییر مسیر انتشار (گزینه ۶):</strong> به‌روزرسانی پوشه مقصد برای یک گواهینامه و انتشار فوری آخرین نسخه.</li>
    <li><strong>حذف یک دامنه (گزینه ۹):</strong> توقف مدیریت یک دامنه با Smart-SSL، با امکان حذف گواهینامه از <code>certbot</code>.</li>
</ul>

<hr>

<h2>🔮 ویژگی‌های پیشرفته</h2>

<h3>وارد کردن گواهینامه موجود (گزینه ۱۰)</h3>
<p>آیا از قبل گواهینامه‌هایی روی سرور خود دارید؟ می‌توانید آن‌ها را تحت مدیریت Smart-SSL قرار دهید تا از ویژگی‌هایی مانند انتشار خودکار بهره‌مند شوید.</p>
<ol>
    <li><strong>گزینه ۱۰) وارد کردن گواهینامه موجود Certbot</strong> را انتخاب کنید.</li>
    <li>گواهینامه‌ای را که می‌خواهید از لیست بپذیرید، انتخاب کنید.</li>
    <li>در صورت نیاز، یک مسیر انتشار تعریف کنید.</li>
</ol>

<h3>تبدیل به DNS کلودفلر (گزینه ۱۱)</h3>
<p>یک گواهینامه موجود (مثلاً یکی که با متد <code>webroot</code> صادر شده) را به متد قوی‌تر DNS کلودفلر ارتقا دهید.</p>
<ol>
    <li><strong>گزینه ۱۱) تبدیل گواهینامه موجود Certbot به Cloudflare DNS</strong> را انتخاب کنید.</li>
    <li>گواهینامه مورد نظر برای تبدیل را انتخاب کنید. اسکریپت به طور خودکار آن را با استفاده از API کلودفلر مجدداً صادر می‌کند.</li>
</ol>

<hr>

<h2>⚙️ نگهداری</h2>

<ul>
    <li><strong>به‌روزرسانی خودکار (گزینه ۱۲):</strong> آخرین نسخه اسکریپت را مستقیماً از GitHub دریافت می‌کند.</li>
    <li><strong>حذف (گزینه ۱۳):</strong> یک حذف‌کننده جامع که اسکریپت و تنظیمات آن را به طور کامل پاک می‌کند.</li>
    <li><strong>تمدید دستی (گزینه ۷):</strong> یک اجرای آزمایشی (dry run) از فرآیند تمدید برای دامنه‌های مدیریت شده خود انجام دهید تا تنظیمات خود را تست کنید.</li>
</ul>

<hr>

<h2>🤖 خط فرمان غیر تعاملی (CLI)</h2>

<p>هر گزینه منو به عنوان یک آرگومان خط فرمان نیز در دسترس است، که Smart-SSL را برای اتوماسیون ایده‌آل می‌کند. برای دیدن تمام دستورات موجود، <code>smart-ssl help</code> را اجرا کنید.</p>

<pre><code># مثال: لیست دامنه‌ها از خط فرمان
smart-ssl list

# مثال: انتشار گواهینامه برای یک دامنه خاص
smart-ssl publish mydomain.com</code></pre>
</div>
